<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/styles/bootstrap.min.css" />
    <link rel="stylesheet" href="/styles/style.css" />
    <link rel="stylesheet" href="/styles/user_stocks_card.css" />
    <script src="/scripts/bootstrap/bootstrap.min.js" defer></script>
    <script src="/scripts/bootstrap/jquery.js" defer></script>
    <script src="/scripts/utilities.js" defer></script>
    <script src="/scripts/publicProfile.js" defer></script>
    <script src="/scripts/navbar.js" defer></script>
    <title>User</title>
  </head>
  <body>
    <!-- navbar -->
    <%- include('./partials/navbar') %>

    <div class="container-fluid d-flex flex-column pt-5">
      <!-- header -->
      <div class="row">
        <div class="col custom-header-container">
          <h1 class="header">Profile</h1>
          <h3 class="sub-header"><%- publicUser.fullname %>'s profile .</h3>
        </div>
      </div>

      <!-- content -->
      <div class="row custom-header-container">
        <div class="row container-fluid mt-5">
          <div class="col-lg-4">
            <div class="card custom-card mb-1">
              <div class="card-body text-center">
                <img
                  src="<%- publicUser.image %>"
                  alt="avatar"
                  class="rounded-circle img-fluid"
                  style="width: 150px; height: 150px; object-fit: cover"
                />
                <h3 class="lobster-font mt-3 mb-1">
                  <%- publicUser.fullname %>
                </h3>
              </div>
            </div>
          </div>
          <div class="col-lg-8">
            <div class="card custom-card mb-4">
              <div class="card-body">
                <!-- Username -->
                <div class="row mt-4">
                  <div class="col-sm-3">
                    <p class="text-muted mb-0">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="16"
                        height="16"
                        fill="currentColor"
                        class="bi bi-at me-2"
                        viewBox="0 0 16 16"
                      >
                        <path
                          d="M13.106 7.222c0-2.967-2.249-5.032-5.482-5.032-3.35 0-5.646 2.318-5.646 5.702 0 3.493 2.235 5.708 5.762 5.708.862 0 1.689-.123 2.304-.335v-.862c-.43.199-1.354.328-2.29.328-2.926 0-4.813-1.88-4.813-4.798 0-2.844 1.921-4.881 4.594-4.881 2.735 0 4.608 1.688 4.608 4.156 0 1.682-.554 2.769-1.416 2.769-.492 0-.772-.28-.772-.76V5.206H8.923v.834h-.11c-.266-.595-.881-.964-1.6-.964-1.4 0-2.378 1.162-2.378 2.823 0 1.737.957 2.906 2.379 2.906.8 0 1.415-.39 1.709-1.087h.11c.081.67.703 1.148 1.503 1.148 1.572 0 2.57-1.415 2.57-3.643zm-7.177.704c0-1.197.54-1.907 1.456-1.907.93 0 1.524.738 1.524 1.907S8.308 9.84 7.371 9.84c-.895 0-1.442-.725-1.442-1.914z"
                        />
                      </svg>
                      <span>Username</span>
                    </p>
                  </div>
                  <div class="col-sm-9">
                    <p class="mb-0 bold-text">
                      <span><%- publicUser.username %></span>
                    </p>
                  </div>
                </div>
                <hr class="custom-hr" />

                <!-- Address -->
                <div class="row">
                  <div class="col-sm-3">
                    <p class="text-muted mb-0">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="16"
                        height="16"
                        fill="currentColor"
                        class="bi bi-wallet2 me-2"
                        viewBox="0 0 16 16"
                      >
                        <path
                          d="M12.136.326A1.5 1.5 0 0 1 14 1.78V3h.5A1.5 1.5 0 0 1 16 4.5v9a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 13.5v-9a1.5 1.5 0 0 1 1.432-1.499L12.136.326zM5.562 3H13V1.78a.5.5 0 0 0-.621-.484L5.562 3zM1.5 4a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-13z"
                        />
                      </svg>
                      <span>Address</span>
                    </p>
                  </div>
                  <div class="col-sm-9">
                    <p class="mb-0 bold-text">
                      <% if(publicUser.address) { %> <%= publicUser.address %>
                      <% } else { %>
                      <a href="/users/register">Add new One</a>
                      <% } %>
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Stocks Details -->
        <div class="row container-fluid border border-1 rounded-3 mb-3 mx-aut">
          <div class="container py-2">
            <ul class="nav nav-pills p-3 mb-3" id="pills-tab" role="tablist">
              <li class="nav-item" role="presentation">
                <button
                  class="nav-link active"
                  id="pills-home-tab"
                  data-bs-toggle="pill"
                  data-bs-target="#pills-home"
                  type="button"
                  role="tab"
                  aria-controls="pills-home"
                  aria-selected="true"
                >
                  Stocks
                </button>
              </li>
              <li class="nav-item" role="presentation">
                <button
                  class="nav-link"
                  id="pills-profile-tab"
                  data-bs-toggle="pill"
                  data-bs-target="#pills-profile"
                  type="button"
                  role="tab"
                  aria-controls="pills-profile"
                  aria-selected="false"
                >
                  For sale
                </button>
              </li>
            </ul>
            <div class="tab-content" id="pills-tabContent">
              <div
                class="tab-pane fade show active"
                id="pills-home"
                role="tabpanel"
                aria-labelledby="pills-home-tab"
              >
                <% if (unlistedStocks.length > 0) { %>
                  <% unlistedStocks.forEach((stock) => { %> 
                    <%- include('./partials/userStockCardPublic', { stock }) %>
                  <% }) %>
                <% } else { %>
                <p class="h5 pb-3 text-muted text-center">
                  Doesn't have any sotck .
                </p>
                <% } %>
              </div>
              <div
                class="tab-pane fade"
                id="pills-profile"
                role="tabpanel"
                aria-labelledby="pills-profile-tab"
              >
                <% if (listedStocks.length > 0) { %>
                  <% listedStocks.forEach((stock) => { %> 
                    <%- include('./partials/userStockCardForSalePublic', { stock }) %>
                  <% }) %>
                <% } else { %>
                <p class="h5 pb-3 text-muted text-center">
                  Doesn't have any sotck .
                </p>
                <% } %>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
